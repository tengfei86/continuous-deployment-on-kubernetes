<html>

<head>
    <script>
        // ajax 对象
        function ajaxObject() {
            var xmlHttp;
            try {
                // Firefox, Opera 8.0+, Safari
                xmlHttp = new XMLHttpRequest();
                } 
            catch (e) {
                // Internet Explorer
                try {
                        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                    try {
                        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e) {
                        alert("您的浏览器不支持AJAX！");
                        return false;
                    }
                }
            }
            return xmlHttp;
        }
        // ajax post请求：
        function ajaxPost ( url , data , fnResponse, fnLoading ) {
            var ajax = ajaxObject();
            ajax.open( "post" , url , true );
            ajax.setRequestHeader( "Content-Type" , "application/json" );
            ajax.onreadystatechange = function () {
                if( ajax.readyState == 4 ) {
                    fnResponse(ajax.status,ajax.responseText);
                } else {
                    fnLoading();
                }
            }
            ajax.send( data );
        }

        function postCommon() {
            var url = "https://distplat3.landmarksoftware.io/services/dspdmservice/msp/secure/save";
            var data = document.getElementById("reqBody").value;
            document.getElementById("resBody").value = "start...";
            ajaxPost(url, data, function response(status, text) {
                document.getElementById("resBody").value = status + "\r\n" + text;
            }, function loading() {
                document.getElementById("resBody").value = "loading...";
            });
        }
    </script>
    <link rel="stylesheet" href="../resources/invokeApi.css" type="text/css" />
</head>

<body>
    <!-- Request body -->
    <h5 class="title">Request body:</h5>
    <textarea id="reqBody" rows="12" cols="75">
	{
  "WELL TEST": {
    "readBack": false,
    "data": [
      {
        "type": "WELL TEST",
        "id": 1,
        "WELL_TEST_ID": 1,
        "WELL_ID": 27,
        "UWI": "HAL-TW00001-PDM4",
        "START_TIME": "2020-03-12T00:00:00+05:00",
        "START_TIME_TZ": "273",
        "END_TIME": "2020-04-01T00:00:00+05:00",
        "END_TIME_TZ": "UTC+0:00",
        "DOWNHOLE_GAUGE_MD": 7306,
        "DOWNHOLE_GAUGE_MD_OUOM": "ft",
        "R_WELL_TEST_TYPE_ID": 1,
        "WELL_TEST_TYPE": "Flow Test",
        "IS_ACTIVE": true,
        "REMARK": "",
        "ROW_CHANGED_BY": "",
        "ROW_CREATED_BY": "",
        "PRIMENG_CHECKBOX_ID": 1,
        "DOWNHOLE_GAUGE_MDVALUECHANGED": false,
        "DOWNHOLE_GAUGE_MDERROR_COUNT": 0
      }
    ],
    "language": "en",
    "timezone": "GMT+05:00"
  }
}
    </textarea>

    <!-- Invoke -->
    <button onclick="postCommon()" id="btnInvoke">Try it out!</button>

    <!-- Response body -->
    <h5 class="title">Response body:</h5>
    <textarea id="resBody" rows="18" cols="75">

    </textarea>

    <!-- script -->
    <!-- <script src="../resources/invokeAPI.js">
    </script> -->
</body>

</html>